!function(e){var t,a,o="rd-mobilemenu",n="rd-mobilemenu_ul",i="rd-mobilemenu_submenu",s="rd-mobilepanel",l="rd-mobilepanel_toggle",r="rd-mobilepanel_title",c=function(t,a){this.options=a,this.$source=e(t)};c.prototype={init:function(){this.createDOM(),this.createListeners()},createDOM:function(){e("body").append(e("<div/>",{class:o}).append(this.createNavDOM())).append(e("<div/>",{class:s}).append(e("<button/>",{class:l}).append(e("<span/>"))).append(e("<h2/>",{class:r,text:document.title})))},createNavDOM:function(){for(var t=e("<ul>",{class:n}),a=this.$source.children(),o=0;o<a.length;o++){for(var s=a[o].children,l=null,r=0;r<s.length;r++)if(s[r].tagName)switch(l||(l=document.createElement("li"),a[o].className.indexOf("active")>-1&&(l.className="active")),s[r].tagName.toLowerCase()){case"a":var c=s[r].cloneNode(!0);l.appendChild(c);break;case"ul":for(var d=s[r].cloneNode(!0),u=d.children[0].children[0].children[0].children,h=0;h<u.length;h++){var g=u[h].children[0];g.setAttribute("href",g.getAttribute("href_m"))}d.className=i,e(d).css({display:"none"}),l.appendChild(d),e(l).find("> a").each((function(){$this=e(this),$this.addClass("rd-with-ul").append(e("<span/>",{class:"rd-submenu-toggle"})).find(".rd-submenu-toggle").on("click",(function(t){var a;(t.preventDefault(),$this=e(this).parent(),$this.hasClass("rd-with-ul")&&!$this.hasClass("active"))?(e(".rd-with-ul").removeClass("active"),(a=$this.addClass("active").parent().find("."+i)).stop().slideDown(),e("."+i).not(a).stop().slideUp()):(a=$this.removeClass("active").parent().find("."+i)).stop().slideUp()}))}))}l&&t.append(l)}return t},createListeners:function(){this.createToggleListener(),this.createResizeListener()},createToggleListener:function(){var t,a=this;t=a.isMobile()?"touchstart":"click",e("body").delegate("."+l,t,(function(){var n=e("."+o);e(this).toggleClass("active"),n.hasClass("active")?(e(this).removeClass("active"),n.removeClass("active"),e("body").undelegate("*","mousewheel",a.scroll),e("body").undelegate("*","touchmove",a.scroll),e("body").undelegate("*","touchend",a.touchend),e("body").undelegate("*","touchstart",a.close),e("body").undelegate("*:not(."+l+" span)","click",a.close)):(e(this).addClass("active"),n.addClass("active"),e("body").delegate("*","mousewheel",a.scroll),e("body").delegate("*","touchmove",a.scroll),e("body").delegate("*","touchend",a.touchend),e("body").delegate("*","touchstart",{type:t},a.close),e("body").delegate("*:not(."+l+" span)","click",{type:t},a.close))}))},createResizeListener:function(){var t=this;e(window).on("resize",(function(){var a=e("."+o);"none"==a.css("display")&&(a.removeClass("active"),e("."+l).removeClass("active"),e("body").undelegate("*","mousewheel",t.scroll),e("body").undelegate("*","touchmove",t.scroll),e("body").undelegate("*","touchend",t.touchend),e("body").undelegate("*","touchstart",t.close),e("body").undelegate("*:not(."+l+" span)","click",t.close))}))},scroll:function(o){o.preventDefault();var i=e("."+n),s=o.originalEvent.targetTouches?o.originalEvent.targetTouches[0].pageX:o.pageX,l=o.originalEvent.targetTouches?o.originalEvent.targetTouches[0].pageY:o.pageY;if(l>i.offset().top&&l<i.offset().top+i.outerHeight()&&s>i.offset().left&&s<i.offset().left+i.outerWidth()){var r=0;o.originalEvent.targetTouches?(t||(t=l),r=t-l,t=l,a=r>0):r=-50*(o.originalEvent.wheelDelta||-o.originalEvent.detail),i.stop().scrollTop(i.scrollTop()+r)}return!1},touchend:function(){var o=e("."+n);o.stop().animate({scrollTop:o.scrollTop()+(a?100:-100)},3e3,"easeOutQuint"),t=void 0},close:function(t){if(t.originalEvent){var a=e("."+n),o=t.originalEvent.targetTouches?t.originalEvent.targetTouches[0].pageX:t.pageX,i=t.originalEvent.targetTouches?t.originalEvent.targetTouches[0].pageY:t.pageY;i>a.offset().top&&i<a.offset().top+a.outerHeight()&&o>a.offset().left&&o<a.offset().left+a.outerWidth()||e("."+l).trigger(t.data.type)}},isMobile:function(){return/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)}},e.fn.rdparallax=function(){var e=this;return e.length&&new c(e[0]).init(),e},window.RDMobilemenu_autoinit=function(t){var a=e(t);a.length&&new c(a[0]).init()}}(jQuery),$(document).ready((function(){RDMobilemenu_autoinit(".sf-menu")}));